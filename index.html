<!DOCTYPE html>
<html lang="el">
  <head>
    <meta charset="UTF-8" />
    <title>Απεικόνιση positions.json με p5.js</title>
    <!-- Φόρτωση της βιβλιοθήκης p5.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
  </head>
  <body>
    <script>
      let positions;

      // Προφόρτωση του αρχείου JSON πριν το setup()
      function preload() {
        positions = loadJSON('positions.json');
      }

      function setup() {
        // Υπολογισμός των ορίων για το καμβά
        let maxX = 0,
          maxY = 0;
        for (let key in positions.collapsed) {
          let rectData = positions.collapsed[key];
          if (rectData.x + rectData.width > maxX) maxX = rectData.x + rectData.width;
          if (rectData.y + rectData.height > maxY) maxY = rectData.y + rectData.height;
        }
        // Δημιουργία καμβά με λίγο περιθώριο
        createCanvas(maxX + 20, maxY + 20);
        textAlign(CENTER, CENTER);
        textSize(10);
      }

      function draw() {
        background(255);
        noFill();
        stroke(255, 0, 0);

        // Απεικόνιση κάθε ορθογωνίου και το κείμενο του κλειδιού στο κέντρο του
        for (let key in positions.collapsed) {
          let rectData = positions.collapsed[key];
          rect(rectData.x, rectData.y, rectData.width, rectData.height);
          fill(0);
          noStroke();
          text(key, rectData.x + rectData.width / 2, rectData.y + rectData.height / 2);
          noFill();
          stroke(255, 0, 0);
        }
      }
    </script>
  </body>
</html>
