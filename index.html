<!DOCTYPE html>
<html>
<head>
    <style>
        .container {
            width: 900px;
            height: 506px;
            position: relative;
            margin: 20px auto;
            overflow: hidden;
            border: 2px solid #333;
        }

        .tetris-piece {
            position: absolute;
            background-image: url('PP.jpg');
            background-size: 900px 506px;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
        }

        button {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container" id="puzzleContainer"></div>
    <button id="stopBtn">STOP</button>

    <svg width="0" height="0">
        <!-- Tetris Clip-Paths -->
        <clipPath id="I-shape"><rect width="200" height="50"/></clipPath>
        <clipPath id="T-shape"><path d="M0,0 L150,0 L150,50 L100,50 L100,100 L50,100 L50,50 L0,50 Z"/></clipPath>
        <clipPath id="L-shape"><path d="M0,0 L100,0 L100,100 L50,100 L50,50 L0,50 Z"/></clipPath>
        <clipPath id="O-shape"><rect width="100" height="100"/></clipPath>
    </svg>

    <script>
        // Προκαθορισμένη διάταξη Tetris (900x506px)
        const STATIC_LAYOUT = [
            { type: 'I', x: 0,   y: 0,   width: 200, height: 50  },
            { type: 'L', x: 200, y: 0,   width: 100, height: 100 },
            { type: 'T', x: 300, y: 0,   width: 150, height: 100 },
            { type: 'O', x: 450, y: 0,   width: 100, height: 100 },
            { type: 'I', x: 550, y: 0,   width: 200, height: 50  },
            { type: 'L', x: 750, y: 0,   width: 100, height: 100, rotate: 180 },
            // ... (Προσθέστε όλα τα απαραίτητα κομμάτια για πλήρη κάλυψη)
        ];

        let animationActive = true;
        let pieces = [];

        function initializePuzzle() {
            const container = document.getElementById('puzzleContainer');
            
            STATIC_LAYOUT.forEach((pieceConfig, index) => {
                const piece = document.createElement('div');
                piece.className = 'tetris-piece';
                
                // Στυλ και θέση
                Object.assign(piece.style, {
                    width: `${pieceConfig.width}px`,
                    height: `${pieceConfig.height}px`,
                    left: `${pieceConfig.x}px`,
                    top: `${pieceConfig.y}px`,
                    clipPath: `url(#${pieceConfig.type}-shape)`,
                    backgroundPosition: `-${pieceConfig.x}px -${pieceConfig.y}px`
                });

                // Αποθήκευση τελικής θέσης
                piece.dataset.finalX = pieceConfig.x;
                piece.dataset.finalY = pieceConfig.y;
                
                container.appendChild(piece);
                pieces.push(piece);
            });
        }

        async function animationCycle() {
            while(animationActive) {
                // Φάση 1: Προβολή εικόνας
                await new Promise(r => setTimeout(r, 2000));
                
                // Φάση 2: Ακαριαία εξαφάνιση
                pieces.forEach(piece => {
                    piece.style.transition = 'none';
                    piece.style.transform = `translateY(-100vh)`;
                    piece.style.opacity = '0';
                });
                await new Promise(r => requestAnimationFrame(r));
                
                // Φάση 3: Εισαγωγή κομματιών
                for(let i = pieces.length - 1; i >= 0; i--) {
                    const piece = pieces[i];
                    piece.style.transition = 'all 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
                    piece.style.transform = `translateY(100vh)`;
                    piece.style.opacity = '1';
                    
                    setTimeout(() => {
                        piece.style.transform = `translate(0,0)`;
                    }, 100);
                    
                    await new Promise(r => setTimeout(r, 50));
                }
                
                // Φάση 4: Παύση
                await new Promise(r => setTimeout(r, 2000));
            }
        }

        document.getElementById('stopBtn').addEventListener('click', () => {
            animationActive = false;
        });

        window.onload = () => {
            initializePuzzle();
            animationCycle();
        };
    </script>
</body>
</html>
