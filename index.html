<!DOCTYPE html>
<html>
<head>
    <style>
        .container {
            width: 900px;
            height: 506px;
            position: relative;
            margin: 20px auto;
            overflow: hidden;
            border: 2px solid #333;
        }

        .puzzle-piece {
            width: 50px;
            height: 50.6px;
            position: absolute;
            background-image: url('PP.jpg');
            background-size: 900px 506px;
            transition: all 1s ease-in-out;
            clip-path: url(#tShapedTabs);
        }

        .puzzle-piece.solved {
            clip-path: none !important;
            z-index: 1;
        }

        button {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container" id="puzzleContainer"></div>
    <button id="stopBtn">STOP</button>

    <!-- SVG με γλωσσίδες τύπου Τ -->
    <svg width="0" height="0">
        <clipPath id="tShapedTabs">
            <!-- Τριγωνικές γλωσσίδες με μορφή "Τ" -->
            <path d="M0,20 L15,20 L15,0 L35,0 L35,20 L50,20 
                     L50,35 L35,35 L35,55 L15,55 L15,35 L0,35 Z
                     
                     M50,0 L65,0 L65,20 L85,20 L85,0 L100,0 
                     L100,35 L85,35 L85,55 L65,55 L65,35 L50,35 Z
                     
                     M0,65 L15,65 L15,85 L35,85 L35,65 L50,65 
                     L50,100 L35,100 L35,80 L15,80 L15,100 L0,100 Z
                     
                     M50,65 L65,65 L65,85 L85,85 L85,65 L100,65 
                     L100,100 L85,100 L85,80 L65,80 L65,100 L50,100 Z"/>
        </clipPath>
    </svg>

    <script>
        const COLS = 18;
        const ROWS = 10;
        let animationActive = true;
        let timeoutId;

        function createPuzzle() {
            const container = document.getElementById('puzzleContainer');
            container.innerHTML = '';

            for(let row = 0; row < ROWS; row++) {
                for(let col = 0; col < COLS; col++) {
                    const piece = document.createElement('div');
                    piece.className = 'puzzle-piece';
                    piece.style.backgroundPosition = `-${col * 50}px -${row * 50.6}px`;
                    piece.style.transform = `translate(${Math.random()*800}px, ${Math.random()*400}px)`;
                    container.appendChild(piece);
                }
            }
        }

        function solvePuzzle() {
            document.querySelectorAll('.puzzle-piece').forEach((piece, index) => {
                const col = index % COLS;
                const row = Math.floor(index / COLS);
                piece.style.transform = `translate(${col * 50}px, ${row * 50.6}px)`;
                piece.classList.add('solved');
            });
        }

        function scramblePuzzle() {
            document.querySelectorAll('.puzzle-piece').forEach(piece => {
                piece.style.transform = `translate(${Math.random()*800}px, ${Math.random()*400}px)`;
                piece.classList.remove('solved');
            });
        }

        function animatePuzzle() {
            if (!animationActive) return;
            solvePuzzle();
            timeoutId = setTimeout(() => {
                scramblePuzzle();
                timeoutId = setTimeout(animatePuzzle, 2000);
            }, 2000);
        }

        document.getElementById('stopBtn').addEventListener('click', () => {
            animationActive = false;
            clearTimeout(timeoutId);
        });

        window.onload = () => {
            createPuzzle();
            animatePuzzle();
        };
    </script>
</body>
</html>
