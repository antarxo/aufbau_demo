<!DOCTYPE html>
<html>
<head>
    <style>
        .container {
            width: 900px;
            height: 506px;
            position: relative;
            margin: 20px auto;
            overflow: hidden;
            border: 2px solid #333;
        }

        .tetris-piece {
            position: absolute;
            background-image: url('PP.jpg');
            background-size: 900px 506px;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
        }

        button {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container" id="puzzleContainer"></div>
    <button id="stopBtn">STOP</button>

    <svg width="0" height="0">
        <!-- Tetris Clip-Paths (Όλα τα μεγέθη πολλαπλάσια των 50px) -->
        <clipPath id="I-shape"><rect width="200" height="50"/></clipPath>
        <clipPath id="T-shape"><path d="M0,0 L150,0 L150,50 L100,50 L100,100 L50,100 L50,50 L0,50 Z"/></clipPath>
        <clipPath id="L-shape"><path d="M0,0 L50,0 L50,150 L0,150 Z"/></clipPath>
        <clipPath id="O-shape"><rect width="100" height="100"/></clipPath>
        <clipPath id="line-shape"><rect width="300" height="50"/></clipPath>
    </svg>

    <script>
        // Προκαθορισμένη διάταξη για 900x506px
        const STATIC_LAYOUT = [
            // Γραμμή 1
            { type: 'I',    x: 0,   y: 0,   width: 200, height: 50  },
            { type: 'T',    x: 200, y: 0,   width: 150, height: 100 },
            { type: 'O',    x: 350, y: 0,   width: 100, height: 100 },
            { type: 'line', x: 450, y: 0,   width: 300, height: 50  },
            
            // Γραμμή 2
            { type: 'L',    x: 0,   y: 100, width: 50,  height: 150 },
            { type: 'O',    x: 50,  y: 100, width: 100, height: 100 },
            { type: 'I',    x: 150, y: 100, width: 200, height: 50  },
            { type: 'T',    x: 350, y: 100, width: 150, height: 100 },
            
            // Γραμμή 3
            { type: 'line', x: 0,   y: 250, width: 300, height: 50  },
            { type: 'L',    x: 300, y: 250, width: 50,  height: 150 },
            { type: 'O',    x: 350, y: 250, width: 100, height: 100 },
            { type: 'I',    x: 450, y: 250, width: 200, height: 50  },
            
            // Γραμμή 4 (τελευταία 6px προστέθηκαν για 506px συνολικό ύψος)
            { type: 'line', x: 0,   y: 456, width: 900, height: 50  }
        ];

        let animationActive = true;
        let pieces = [];

        function initializePuzzle() {
            const container = document.getElementById('puzzleContainer');
            
            STATIC_LAYOUT.forEach(config => {
                const piece = document.createElement('div');
                piece.className = 'tetris-piece';
                
                // Ορισμός σχήματος και θέσης
                Object.assign(piece.style, {
                    width: `${config.width}px`,
                    height: `${config.height}px`,
                    left: `${config.x}px`,
                    top: `${config.y}px`,
                    clipPath: `url(#${config.type}-shape)`,
                    backgroundPosition: `-${config.x}px -${config.y}px`
                });

                container.appendChild(piece);
                pieces.push(piece);
            });
        }

        async function animationCycle() {
            while(animationActive) {
                // Φάση 1: Προβολή εικόνας
                await new Promise(r => setTimeout(r, 2000));
                
                // Φάση 2: Ακαριαία εξαφάνιση
                pieces.forEach(piece => {
                    piece.style.transition = 'none';
                    piece.style.transform = `translateY(-100vh)`;
                    piece.style.opacity = '0';
                });
                await new Promise(r => requestAnimationFrame(r));
                
                // Φάση 3: Εισαγωγή κομματιών
                for(let i = pieces.length - 1; i >= 0; i--) {
                    const piece = pieces[i];
                    const startX = parseInt(piece.style.left) - 50 + Math.random() * 100;
                    
                    piece.style.transition = 'all 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
                    piece.style.transform = `translate(${startX}px, 100vh)`;
                    piece.style.opacity = '1';
                    
                    setTimeout(() => {
                        piece.style.transform = `translate(0,0)`;
                    }, 100);
                    
                    await new Promise(r => setTimeout(r, 50));
                }
                
                // Φάση 4: Παύση
                await new Promise(r => setTimeout(r, 2000));
            }
        }

        document.getElementById('stopBtn').addEventListener('click', () => {
            animationActive = false;
        });

        window.onload = () => {
            initializePuzzle();
            animationCycle();
        };
    </script>
</body>
</html>
