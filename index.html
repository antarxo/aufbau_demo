<!DOCTYPE html>
<html>
<head>
    <style>
        .container {
            width: 800px;
            height: 600px;
            position: relative;
            margin: 20px auto;
            overflow: hidden;
            border: 2px solid #333;
        }

        .puzzle-piece {
            width: 50px;
            height: 50px;
            position: absolute;
            background-image: url('PP.jpg');
            background-size: 800px 600px;
            transition: all 2s ease-in-out;
            clip-path: polygon(
                0% 20%, 20% 0%, 80% 0%, 100% 20%,
                100% 80%, 80% 100%, 20% 100%, 0% 80%
            );
        }

        button {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
        }
    </style>
</head>
<body>
    <div class="container" id="puzzleContainer"></div>
    <button id="stopBtn">STOP</button>

    <script>
        const ROWS = 12;
        const COLS = 16;
        let animationActive = true;
        
        function createPuzzle() {
            const container = document.getElementById('puzzleContainer');
            
            for(let row = 0; row < ROWS; row++) {
                for(let col = 0; col < COLS; col++) {
                    const piece = document.createElement('div');
                    piece.className = 'puzzle-piece';
                    
                    // Background positioning
                    piece.style.backgroundPosition = 
                        `-${col * 50}px -${row * 50}px`;
                    
                    // Original position data
                    piece.dataset.origX = col * 50;
                    piece.dataset.origY = row * 50;
                    
                    container.appendChild(piece);
                }
            }
            scramblePuzzle();
        }

        function scramblePuzzle() {
            const pieces = document.querySelectorAll('.puzzle-piece');
            pieces.forEach(piece => {
                const x = Math.random() * 600;
                const y = Math.random() * 400;
                piece.style.transform = `translate(${x}px, ${y}px)`;
            });
        }

        function solvePuzzle() {
            const pieces = document.querySelectorAll('.puzzle-piece');
            pieces.forEach(piece => {
                piece.style.transform = `translate(0,0)`;
            });
        }

        function animationLoop() {
            if(!animationActive) return;
            
            solvePuzzle();
            setTimeout(() => {
                scramblePuzzle();
                setTimeout(animationLoop, 2000);
            }, 2000);
        }

        // Event listeners
        document.getElementById('stopBtn').addEventListener('click', () => {
            animationActive = false;
        });

        // Initialize
        window.onload = () => {
            createPuzzle();
            animationLoop();
        };
    </script>
</body>
</html>
